<!DOCTYPE html>
<!-- saved from url=(0076)file:///C:/Users/yungb/Documents/GitHub/K1llajay/laurent-by-jae-laurent.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Laurent Store - Premium Products &amp; Fashion</title>
    <link rel="icon" href="file:///C:/Users/yungb/Documents/GitHub/K1llajay/favicon.ico">
    <style>
        @font-face {
            font-family: 'sitefont';
            src: url('beyoncefont.ttf') format('truetype');
        }

        /* ================= RESET ================= */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
            font-family: 'sitefont', monospace;
            text-transform: uppercase;
            color: white;
        }

        /* ================= INFINITE BACKGROUND ================= */
        body::before {
            content: "";
            position: fixed;
            inset: 0;
            background: url("IMG_3309.gif") center / cover no-repeat;
            z-index: -2;
        }

        body::after {
            content: "";
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.65);
            z-index: -1;
        }

        /* ================= BODY ================= */
        body {
            display: flex;
            min-height: 100dvh;
        }

        html, body {
            padding-top: 35px;
        }

        /* ================= SIDEBAR ================= */
        .sidebar {
            width: 260px;
            height: 100dvh;
            padding: 24px;
            position: fixed;
            left: 0;
            top: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255,255,255,0.15);
            z-index: 3000;
        }

        .profile-img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid white;
            margin-bottom: 20px;
        }

        .name {
            font-size: 22px;
            letter-spacing: 3px;
            margin-bottom: 40px;
        }

        .buttons {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .button {
            padding: 10px;
            text-align: center;
            text-decoration: none;
            color: white;
            font-size: 13px;
            letter-spacing: 2px;
            border: 1px solid rgba(255,255,255,0.4);
  transition: border-color 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), color 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1;
  will-change: border-color, color;
}

.button::before {
  content: "";
  position: absolute;
  inset: 0;
  background: url('Soulaan-flag-v0-26ghsv12s7cb1.webp') center / cover no-repeat;
  filter: brightness(0.4);
  border-radius: inherit;
  z-index: -1;
  transition: filter 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  will-change: filter;
        }

        .footer {
            margin-top: auto;
            font-size: 10px;
            opacity: 0.7;
            text-align: center;
        }

        .footer a {
            color: white;
            text-decoration: none;
        }

        .copyright {
            font-size: 8px;
            margin-top: 6px;
        }

        /* ================= TOP BAR (MOBILE) ================= */
        .topbar {
            display: none;
        }

        .topbar-cart {
            display: none;
        }

        /* ================= MAIN CONTENT ================= */
        .main-content {
            margin-left: 260px;
            width: calc(100% - 260px);
            height: 100dvh;
            overflow-y: auto;
            padding: 40px;
            box-sizing: border-box;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .main-content::-webkit-scrollbar {
            display: none;
        }

        .content-header {
            margin-bottom: 3rem;
        }

        .content-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            letter-spacing: 3px;
        }

        .content-header p {
            font-size: 1rem;
            opacity: 0.9;
            letter-spacing: 1px;
        }

        .filters {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 3rem;
        }

        .filter-btn {
            padding: 10px 20px;
            border: 1px solid rgba(255,255,255,0.4);
            background: transparent;
            backdrop-filter: blur(10px);
            color: white;
            cursor: pointer;
            transition: 0.3s;
            position: relative;
            font-family: 'sitefont', monospace;
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 2px;
            z-index: 1;
        }

        .filter-btn.active,
        .filter-btn:hover {
            border-color: white;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 3rem;
        }

        .product-card {
            background: transparent;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            overflow: hidden;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            z-index: 1;
        }

        .product-card::before {
            content: "";
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.2);
            z-index: -1;
            transition: all 0.3s;
            backdrop-filter: blur(5px);
        }

        .product-card:hover::before {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(8px);
        }

        .product-card:hover {
            border-color: white;
            transform: translateY(-3px);
        }

        .product-image {
            width: 100%;
            height: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .product-info {
            padding: 15px;
        }

        .product-category {
            color: rgba(255,255,255,0.7);
            font-size: 10px;
            letter-spacing: 2px;
            margin-bottom: 8px;
        }

        .product-name {
            font-size: 13px;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }

        .product-description {
            color: rgba(255,255,255,0.6);
            font-size: 10px;
            margin-bottom: 10px;
            letter-spacing: 0.5px;
        }

        .product-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .product-price {
            font-size: 14px;
            letter-spacing: 1px;
        }

        .rating {
            color: rgba(255,255,255,0.6);
            font-size: 10px;
            margin-bottom: 8px;
        }

        .add-to-cart-btn {
            background: transparent;
            backdrop-filter: blur(10px);
            color: white;
            border: 1px solid rgba(255,255,255,0.4);
            padding: 6px 12px;
            border-radius: 3px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-family: 'sitefont', monospace;
            text-transform: uppercase;
            font-size: 10px;
            letter-spacing: 1px;
            position: relative;
            z-index: 1;
            background: rgba(0,0,0,0.4);
        }

        .add-to-cart-btn:hover {
            border-color: white;
        }

        .cart-modal {
            position: fixed;
            top: 0;
            right: 0;
            width: 400px;
            height: 100dvh;
            background: transparent;
            z-index: 2200;
            backdrop-filter: blur(10px);
            border-left: 1px solid rgba(255,255,255,0.2);
            transform: translateX(100%);
            transition: transform 0.4s ease-out;
            overflow-y: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .cart-modal::-webkit-scrollbar {
            display: none;
        }

        .cart-modal::before {
            content: "";
            position: fixed;
            top: 0;
            right: 0;
            width: 400px;
            height: 100dvh;
            z-index: -2;
        }

        .cart-modal::after {
            content: "";
            position: fixed;
            top: 0;
            right: 0;
            width: 400px;
            height: 100dvh;
            z-index: -1;
        }

        .cart-modal.active {
            transform: translateX(0);
        }

        .cart-content {
            background: transparent;
            backdrop-filter: blur(10px);
            padding: 2rem;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 2001;
        }

        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid rgba(255,255,255,0.15);
            padding-bottom: 1rem;
        }

        .cart-header h2 {
            margin: 0;
            font-size: 18px;
            letter-spacing: 2px;
        }

        .close-cart {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: rgba(255,255,255,0.8);
        }

        /* ================= PRODUCT MODAL ================= */
        .product-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1500;
            align-items: flex-start;
            justify-content: center;
            backdrop-filter: blur(10px);
            overflow-y: auto;
            margin-left: 260px;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .product-modal::-webkit-scrollbar {
            display: none;
        }

        .product-modal::before {
            content: "";
            position: fixed;
            inset: 0;
            background: url("IMG_3309.gif") center / cover no-repeat;
            z-index: -2;
            pointer-events: none;
        }

        .product-modal::after {
            content: "";
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.65);
            z-index: -1;
            pointer-events: none;
        }

        .product-modal.active {
            display: flex;
        }

        .product-modal-content {
            background: transparent;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            padding: 2rem;
            max-width: 1200px;
            width: 90%;
            position: relative;
            z-index: 2501;
            margin-top: 3.5rem;
    margin-bottom: 0rem;
    margin-left: -240px;
            max-height: 90vh;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            grid-template-rows: auto 1fr auto;
        }



        .product-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
            border-bottom: none;
            padding-bottom: 0;
            grid-column: 2;
            grid-row: 1;
        }

        .product-modal-header h2 {
            margin: 0;
            font-size: 24px;
            letter-spacing: 1px;
            font-weight: normal;
        }

        .product-modal-scrollable-content {
    margin-top: -65px;
    grid-column: 2;
    grid-row: 2;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    scrollbar-width: none;
    -ms-overflow-style: none;
    padding-right: 0.5rem;
        }

        .product-modal-scrollable-content::-webkit-scrollbar {
            display: none;
        }

        .close-product-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: rgba(255,255,255,0.8);
        }

        .product-modal-image {
          width: 100%;
          height: auto;
          aspect-ratio: 3 / 4;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            background: transparent;
            border: none;
            border-radius: 5px;
            margin-bottom: 0;
            overflow: hidden;
            grid-row: 1 / 3;
        }

        .product-modal-image img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }

        .product-image-gallery {
          position: relative;
          width: 100%;
          height: auto;
          aspect-ratio: 4 / 4;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          flex-shrink: 0;
        }

        .image-track {
          display: flex;
          width: 100%;
          height: 100%;
          min-width: 100%;
          min-height: 100%;
          overflow-x: auto;
          scroll-snap-type: x mandatory;
          scroll-behavior: smooth;
          scrollbar-width: none;
          -ms-overflow-style: none;
        }

        .image-track::-webkit-scrollbar {
          display: none;
        }

        .image-track img {
          width: 100%;
          height: 100%;
          object-fit: cover;
          flex: 0 0 100%;
          scroll-snap-align: start;
          transition: opacity 0.3s ease-out;
          display: block;
        }

        .image-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            z-index: 10;
        }

        .image-nav-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .image-nav-btn.prev {
            left: 10px;
        }

        .image-nav-btn.next {
            right: 10px;
        }

        .image-counter {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            letter-spacing: 1px;
            z-index: 10;
        }

        .image-thumbnails {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            padding: 0 10px;
            overflow-x: auto;
            max-height: 80px;
            scrollbar-width: none;
            -ms-overflow-style: none;
            flex-shrink: 0;
        }

        .image-thumbnails::-webkit-scrollbar {
            display: none;
        }

        .image-thumbnail {
            width: 60px;
            height: 60px;
            border-radius: 4px;
            cursor: pointer;
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s;
            flex-shrink: 0;
            overflow: hidden;
        }

        .image-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .image-thumbnail:hover,
        .image-thumbnail.active {
            border-color: white;
        }

        @media (max-width: 768px) {
            .product-modal-image {
                height: 350px;
                margin-bottom: 1rem;
            }
        }

        .product-modal-info {
            margin-bottom: 1.5rem;
        }

        .product-modal-info h3 {
            font-size: 14px;
            margin-bottom: 0.8rem;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            user-select: none;
        }

        .description-toggle {
            background: none;
            border: none;
            color: white;
            font-size: 14px;
            cursor: pointer;
            padding: 0;
            font-weight: bold;
            font-family: 'sitefont', monospace;
        }

        .description-toggle.collapsed::before {
            content: "‚ñ∂ ";
        }

        .description-toggle.expanded::before {
            content: "‚ñº ";
        }

        .product-modal-info p {
            font-size: 12px;
            color: rgba(255,255,255,0.7);
            line-height: 1.6;
            letter-spacing: 0.5px;
            max-height: 200px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: rgba(255,255,255,0.3) transparent;
            transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
            opacity: 1;
            padding-right: 0.5rem;
        }

        .product-modal-info p::-webkit-scrollbar {
            width: 6px;
        }

        .product-modal-info p::-webkit-scrollbar-track {
            background: transparent;
        }

        .product-modal-info p::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
        }

        .product-modal-info p::-webkit-scrollbar-thumb:hover {
            background: rgba(255,255,255,0.5);
        }

        .product-modal-info p.collapsed {
            max-height: 0;
            opacity: 0;
        }

        .product-modal-price {
            font-size: 18px;
            font-weight: normal;
            margin-bottom: 0.5rem;
            letter-spacing: 1px;
        }

        .product-modal-actions {
            display: flex;
            gap: 1rem;
            grid-column: 1 / -1;
            grid-row: 3;
            flex-direction: column;
        }

        .product-modal-add-btn {
            background: #1a1a1a;
            backdrop-filter: blur(10px);
            color: white;
            border: 1px solid #1a1a1a;
            padding: 14px;
            border-radius: 3px;
            font-size: 12px;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'sitefont', monospace;
            text-transform: uppercase;
            position: relative;
            z-index: 1;
            width: 100%;
        }

        .product-modal-add-btn:hover {
            border-color: white;
        }

        /* ================= SIZE SELECTOR ================= */
        .size-selector {
            margin-bottom: 1.5rem;
        }

        .size-selector label {
            display: block;
            font-size: 12px;
            margin-bottom: 0.8rem;
            letter-spacing: 1px;
            color: rgba(255,255,255,0.8);
            text-transform: uppercase;
        }

        .size-options {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.8rem;
        }

        .size-option {
            background: transparent;
            border: 1px solid rgba(255,255,255,0.5);
            color: white;
            padding: 12px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'sitefont', monospace;
            font-size: 12px;
            text-align: center;
            transition: all 0.3s;
            text-transform: uppercase;
            font-weight: 500;
            letter-spacing: 1px;
        }

        .size-option:hover {
            border-color: white;
            background: rgba(255,255,255,0.05);
            box-shadow: 0 0 10px rgba(255,255,255,0.1);
        }

        .size-option.selected {
            border-color: white;
            background: rgba(255,255,255,0.15);
            box-shadow: 0 0 15px rgba(255,255,255,0.3);
        }

        .product-modal-colors {
            margin-bottom: 1.5rem;
        }

        .product-modal-colors label {
            display: block;
            font-size: 12px;
            margin-bottom: 0.8rem;
            letter-spacing: 1px;
            color: rgba(255,255,255,0.8);
            text-transform: uppercase;
        }

        .color-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
            gap: 0.8rem;
            max-height: 200px;
            overflow-y: auto;
            padding-right: 0.5rem;
            scrollbar-width: thin;
            scrollbar-color: rgba(255,255,255,0.3) transparent;
        }

        .color-options::-webkit-scrollbar {
            width: 6px;
        }

        .color-options::-webkit-scrollbar-track {
            background: transparent;
        }

        .color-options::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
        }

        .color-option {
            width: 50px;
            height: 50px;
            border-radius: 4px;
            border: 2px solid rgba(255,255,255,0.3);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .color-option:hover {
            border-color: white;
          box-shadow: none;
        }

        .color-option.selected {
            border-color: white;
          box-shadow: none;
        }


        .product-modal-footer {
            display: flex;
            gap: 1rem;
            margin-top: 0;
            border-top: 1px solid rgba(255,255,255,0.15);
            padding-top: 1rem;
            grid-column: 1 / -1;
            grid-row: 3;
            justify-content: flex-start;
            flex-wrap: wrap;
        }

        .modal-footer-tab {
            background: none;
            border: none;
            color: white;
            font-family: 'sitefont', monospace;
            text-transform: uppercase;
            font-size: 11px;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s;
            padding: 0;
            flex: none;
            text-align: left;
            opacity: 0.6;
            margin-right: 2rem;
        }

        .modal-footer-tab:hover,
        .modal-footer-tab.active {
            opacity: 1;
            border-bottom: 2px solid white;
            padding-bottom: 0.5rem;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-size: 12px;
            letter-spacing: 0.5px;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-weight: bold;
            margin-bottom: 0.3rem;
        }

        .cart-item-price {
            color: rgba(255,255,255,0.8);
        }

        .cart-item-quantity {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            margin-left: 1rem;
        }

        .qty-btn {
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
            width: 25px;
            height: 25px;
            border-radius: 3px;
            cursor: pointer;
            font-weight: bold;
            color: white;
            font-family: 'sitefont', monospace;
            transition: all 0.3s;
        }

        .qty-btn:hover {
            background: rgba(255,255,255,0.2);
            border-color: white;
        }

        .remove-item {
            background: rgba(0,0,0,0.4);
            color: white;
            border: 1px solid rgba(255,255,255,0.4);
            padding: 4px 8px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 10px;
            letter-spacing: 1px;
            margin-left: 0.5rem;
            font-family: 'sitefont', monospace;
            text-transform: uppercase;
            transition: all 0.3s;
        }

        .remove-item:hover {
            border-color: white;
        }

        .cart-empty {
            text-align: center;
            padding: 2rem;
            color: rgba(255,255,255,0.6);
            font-size: 12px;
            letter-spacing: 1px;
        }

        .cart-total {
            font-size: 14px;
            font-weight: bold;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255,255,255,0.15);
            letter-spacing: 1px;
        }

        .checkout-btn {
            width: 100%;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(10px);
            color: white;
            border: 1px solid rgba(255,255,255,0.4);
            padding: 10px;
            border-radius: 3px;
            font-size: 12px;
            letter-spacing: 2px;
            margin-top: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'sitefont', monospace;
            text-transform: uppercase;
            position: relative;
            z-index: 1;
        }

        .checkout-btn:hover {
            border-color: white;
        }

        .checkout-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }




        .api-code {
            color: rgba(255,255,255,0.8);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        /* ================= MOBILE ================= */
        @media (max-width: 768px) {
            body {
                flex-direction: column;
                padding-top: 35px;
            }

            body.sidebar-open {
                overflow: hidden;
            }

            .topbar {
                display: grid;
                grid-template-columns: auto 1fr auto;
                position: fixed;
                top: 35px;
                left: 0;
                width: 100%;
                height: 50px;
                padding: 0 15px;
                padding-top: max(0px, env(safe-area-inset-top));
                align-items: center;
                backdrop-filter: blur(10px);
                border-bottom: 1px solid rgba(255,255,255,0.15);
                z-index: 2101;
            }

            .top-name {
                text-align: center;
            }

            .topbar-cart {
                display: flex;
                align-items: center;
                background: transparent;
                backdrop-filter: blur(10px);
                color: white;
                border: 1px solid rgba(255,255,255,0.4);
                padding: 6px 12px;
                border-radius: 3px;
                cursor: pointer;
                font-family: 'sitefont', monospace;
                text-transform: uppercase;
                font-size: 10px;
                letter-spacing: 1px;
                transition: all 0.3s;
                justify-self: end;
            }

            .topbar-cart:hover {
                border-color: white;
            }

            .hamburger {
                font-size: 28px;
                cursor: pointer;
                padding: 5px;
            }

            .top-name {
                margin: 0 auto;
                font-size: 16px;
                letter-spacing: 2px;
            }

            .sidebar {
                display: none;
                position: fixed;
                top: 85px;
                left: 0;
                width: 100%;
                height: calc(100dvh - 85px);
                z-index: 1900;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
            }

            .sidebar.active {
                display: flex;
            }
            .main-content {
                margin-left: 0;
                margin-top: 85px;
                width: 100%;
                padding: 16px;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: flex-start;
            }
            .sidebar.active ~ .main-content {
    overflow: hidden;
  }
            .content-header h1 {
                font-size: 1.8rem;
                margin-bottom: 0.5rem;
            }
            .content-header p {
                font-size: 0.9rem;
            }
            .filters {
                flex-wrap: wrap;
                gap: 0.5rem;
                margin-bottom: 1rem;
            }

            .filter-btn:last-child {
                display: none;
            }
            .filter-btn {
                padding: 8px 12px;
                font-size: 10px;
                backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.15);
            }
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
            .product-image {
                height: 140px;
            }
            .product-info {
                padding: 12px;
            }
            .product-name {
                font-size: 11px;
            }
            .product-price {
                font-size: 12px;
            }
            .add-to-cart-btn {
                padding: 4px 8px;
                font-size: 9px;
            }
            .cart-content {
                max-width: 90%;
                max-height: 70vh;
                padding: 1rem;
            }
            .cart-item {
                font-size: 11px;
                padding: 0.8rem 0;
            }
        }
        
/* ================= BLACK HISTORY MONTH BANNER ================= */
.bhm-banner {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  width: 100%;
  height: 35px;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2100;
  overflow: hidden;
  box-shadow: none;
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.15);
}

.bhm-banner::before {
  content: "";
  position: absolute;
  inset: 0;
  backdrop-filter: blur(10px);
  z-index: 1;
}

.bhm-text {
  position: relative;
  z-index: 2;
  color: white;
  font-size: 20px;
}

@keyframes scrollBanner {
  0% {
    transform: translateX(100vw);
  }
  100% {
    transform: translateX(-100vw);
  }
}

.bhm-text {
  position: relative;
  z-index: 2;
  color: white;
  font-size: 20px;
  animation: scrollBanner 20s linear infinite;
  will-change: transform;
  white-space: nowrap;
}

html, body {
  padding-top: 18px;
}

@media (max-width: 768px) {
  html, body {
    padding-top: 0;
  }

  .product-modal {
    margin-left: 0 !important;
    align-items: center;
    justify-content: flex-start;
    padding-top: 0;
  }

      .product-modal-content {
        grid-template-columns: 1fr !important;
        padding: 0 !important;
        max-width: 100%;
        width: 100%;
        border-radius: 0 !important;
        border: none !important;
        margin-top: 0px !important;
        margin-bottom: 0 !important;
        margin-left: 0 !important;
        max-height: 100%;
        height: 84%;
        grid-template-rows: auto auto 1fr auto !important;
        gap: 0 !important;
        display: flex !important;
        flex-direction: column !important;
        overflow: hidden !important;
        backdrop-filter: none !important;
  }

  .product-modal-image {
    grid-column: unset;
    grid-row: unset;
    width: 100%;
    height: auto;
    aspect-ratio: auto;
    margin-bottom: 0;
    order: 1;
    flex-shrink: 0;
    overflow: hidden !important;
  }

  .product-image-gallery {
    aspect-ratio: 1 / 1.2;
  }

      .product-modal-header {
        grid-column: unset;
        grid-row: unset;
        width: 100%;
        padding: 1rem;
        margin-top: 0px;
        margin-bottom: 0;
        display: flex !important;
        justify-content: space-between;
        align-items: center;
        order: 2;
        flex-shrink: 0;
        border-bottom: none;
        overflow: hidden !important;
    }

  .product-modal-header h2 {
    font-size: 20px;
    margin: 0;
  }

  .product-modal-scrollable-content {
    grid-column: unset;
    grid-row: unset;
    width: 100%;
    margin-top: 0;
    padding: 0 1rem !important;
    padding-bottom: 80px !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    order: 3;
    flex: 1;
  }

  .product-modal-footer {
    display: none !important;
  }

  .modal-footer-tab {
    margin-right: 0;
    padding: 0 0.5rem;
    opacity: 1;
    border: none;
    font-size: 8px;
    flex: none;
  }

  .modal-footer-tab.active {
    border-bottom: none;
    padding-bottom: 0;
  }

  .image-nav-btn {
    display: none !important;
  }

  .image-thumbnails {
    display: none !important;
  }

  .image-counter {
    display: none !important;
  }

  .product-modal-add-btn {
    position: static;
    margin-top: 1.5rem;
    margin-bottom: 1rem;
    backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.15);
  }

  .product-modal-colors {
    margin-top: 1.5rem;
  }

  .size-options {
    grid-template-columns: repeat(4, 1fr);
    backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.15);
  }

  .color-options {
    max-height: none;
    overflow-y: visible;
  }
}
    </style>
</head>
<body>
    <!-- BLACK HISTORY MONTH BANNER -->
    <div class="bhm-banner">
        <div class="bhm-text">HAPPY BLACK HISTORY MONTH!!!!!!!!!!</div>
    </div>

    <!-- MOBILE TOP BAR -->
    <div class="topbar">
        <div class="hamburger">‚ò∞</div>
        <div class="top-name">LAURENT</div>
        <button class="topbar-cart" onclick="toggleCart()">üõí (<span id="cart-count-mobile">0</span>)</button>
    </div>

    <!-- SIDEBAR -->
    <div class="sidebar">
        <img src="IMG_3214.JPEG" class="profile-img" alt="JAE LAURENT">
        <div class="name">
            <a href="https://k1llajay.com/mylinks" style="color:white;text-decoration:none;">JAE LAURENT</a>
        </div>

        <div class="buttons">
            <a href="https://k1llajay.com/" class="button">Home</a>
            <a href="https://k1llajay.com/music" class="button">Latest Release</a>
            <a href="https://k1llajay.com/portfolio" class="button">Portfolio</a>
            <a href="https://k1llajay.com/podcast" class="button">Podcast</a>
            <a href="https://k1llajay.com/player" class="button">All Releases</a>
            <a href="https://k1llajay.com/music-database" class="button">Music Database</a>
            <a href="https://k1llajay.com/events" class="button">Events</a>
            <a href="https://k1llajay.com/memes" class="button">Memes &amp; Videos</a>
        </div>

        <div class="footer">
            <a href="https://mystery.k1llajay.com/">Mystery</a> ‚Ä¢
            <a href="https://k1llajay.com/edit-database_editor">Upload</a> ‚Ä¢
            <a href="https://k1llajay.com/terms">Terms</a> ‚Ä¢
            <a href="https://k1llajay.com/privacy">Privacy</a>
            <div class="copyright">¬© 2025 Jefferson Entertainment LLC</div>
        </div>
    </div>

    <div class="main-content">
        <div class="content-header">
            <h1>LAURENT STORE</h1>
            <p>PREMIUM PRODUCTS & FASHION</p>
        </div>

        <div class="filters">
            <button class="filter-btn active" onclick="filterProducts('all')">ALL</button>
            <button class="filter-btn" onclick="filterProducts('electronics')">ELECTRONICS</button>
            <button class="filter-btn" onclick="filterProducts('fashion')">FASHION</button>
            <button class="filter-btn" onclick="filterProducts('accessories')">ACCESSORIES</button>
            <button class="filter-btn" onclick="toggleCart()" style="margin-left: auto;">üõí CART (<span id="cart-count">0</span>)</button>
        </div>

        <div class="products-grid" id="products-grid">
            <!-- Products will be generated by JavaScript -->
        </div>
    </div>

    <!-- CART SIDEBAR -->
    <div class="cart-modal" id="cart-modal">
        <div class="cart-content">
            <div class="cart-header">
                <h2>SHOPPING CART</h2>
                <button class="close-cart" onclick="toggleCart()">‚úï</button>
            </div>
            <div id="cart-items">
                <div class="cart-empty">YOUR CART IS EMPTY</div>
            </div>
            <div class="cart-total" id="cart-total" style="display: none;">
                TOTAL: $<span id="total-price">0.00</span>
            </div>
            <button class="checkout-btn" id="checkout-btn" onclick="checkout()" disabled>PROCEED TO CHECKOUT</button>
        </div>
    </div>

    <!-- PRODUCT DETAIL MODAL -->
    <div class="product-modal" id="product-modal">
        <div class="product-modal-content">
            <div class="product-modal-image" id="modal-product-image">
                <div class="product-image-gallery" id="imageGallery">
                  <div class="image-track" id="imageTrack"></div>
                  <button class="image-nav-btn prev" onclick="previousImage()">‚ùÆ</button>
                  <button class="image-nav-btn next" onclick="nextImage()">‚ùØ</button>
                  <div class="image-counter"><span id="imageCounter">1</span>/<span id="imageTotalCount">1</span></div>
                </div>
                <div class="image-thumbnails" id="imageThumbnails"></div>
            </div>
            <div class="product-modal-header">
                <h2 id="modal-product-name">PRODUCT NAME</h2>
                <button class="close-product-modal" onclick="closeProductModal()">‚úï</button>
            </div>
            <div class="product-modal-scrollable-content">
                <div class="product-modal-price">$<span id="modal-product-price">0.00</span></div>
                <div class="product-modal-info">
                    <p id="modal-product-description" class="">Product description goes here</p>
                </div>
                <div class="size-selector">
                    <label>SIZE</label>
                    <div class="size-options" id="sizeOptions">
                        <button class="size-option" onclick="selectSize(this)">XS</button>
                        <button class="size-option" onclick="selectSize(this)">S</button>
                        <button class="size-option" onclick="selectSize(this)">M</button>
                        <button class="size-option" onclick="selectSize(this)">L</button>
                        <button class="size-option" onclick="selectSize(this)">XL</button>
                        <button class="size-option" onclick="selectSize(this)">XXL</button>
                    </div>
                </div>
                <button class="product-modal-add-btn" onclick="addToCartFromModal()">ADD TO CART</button>
                <div class="product-modal-colors" style="display: block; margin-top: 1.5rem;">
                    <label>COLORS</label>
                    <div class="color-options" id="colorOptions">
                    </div>
                </div>
            </div>
            <div class="product-modal-footer">
                <button class="modal-footer-tab active" onclick="setActiveTab(this)">SHOP THIS LOOK</button>
                <button class="modal-footer-tab" onclick="setActiveTab(this)">RELATED</button>
            </div>
        </div>
    </div>

    <script>
// Dynamically set backend URL based on connection
async function getBackendURL() {
  // Priority: Try localhost first for local development
  const backendURLs = [
    'http://localhost:3000',           // Local development
    'http://127.0.0.1:3000',           // Loopback
    'https://k1llajay-production.up.railway.app'  // Production
  ];
  
  // If on a known domain, skip localhost attempts
  const hostname = window.location.hostname;
  if (hostname && hostname !== 'localhost' && hostname !== '127.0.0.1' && hostname !== '') {
    // If it's a real domain (k1llajay.com, etc), skip localhost
    return backendURLs[backendURLs.length - 1]; // Return Railway URL
  }
  
  // Otherwise, try localhost first
  for (const url of backendURLs.slice(0, -1)) {
    try {
      const response = await fetch(`${url}/shops`, { 
        method: 'HEAD',
        mode: 'no-cors'
      });
      return url;
    } catch (e) {
      // Continue to next URL
    }
  }
  
  // Fallback to production
  return backendURLs[backendURLs.length - 1];
}

let API = 'http://localhost:3000'; // Default, will be updated in initStore
let SHOP_ID = null;
let products = [];
let cart = [];
let filteredCategory = "all";
let selectedProduct = null;
let productImages = [];
let currentImageIndex = 0;
let selectedSize = null;
let selectedColor = null;
let productVariants = [];
let allProductImages = [];  // All images for the product
let colorImageMapping = {}; // Mapping of color names to image indices

/* ================= LOAD PRODUCTS ================= */
async function initStore() {
  try {
    // First, detect the correct backend URL
    API = await getBackendURL();
    console.log("Using backend URL:", API);
    
    // Fetch all shops
    const shopsRes = await fetch(`${API}/shops`);
    if (!shopsRes.ok) {
      throw new Error(`Failed to fetch shops: ${shopsRes.status} ${shopsRes.statusText}`);
    }
    const shops = await shopsRes.json();
    SHOP_ID = shops[0].id;
    console.log("Shop ID:", SHOP_ID);

    // Fetch products for this shop
    const productsRes = await fetch(`${API}/products/${SHOP_ID}`);
    if (!productsRes.ok) {
      throw new Error(`Failed to fetch products: ${productsRes.status} ${productsRes.statusText}`);
    }
    const productsData = await productsRes.json();
    
    products = productsData.data.map(p => ({
      id: p.id,
      name: p.title,
      price: p.variants[0]?.price / 100 || 0,
      image: p.images[0]?.src || "",
      description: p.description || "",
      category: p.tags?.includes("fashion") ? "fashion" : 
                p.tags?.includes("electronics") ? "electronics" : 
                p.tags?.includes("accessories") ? "accessories" : "fashion",
      variants: p.variants || [],
      tags: p.tags || []
    }));

    console.log("Products loaded:", products.length);
    renderProducts();
  } catch (error) {
    console.error("Failed to load products:", error);
    // Show fallback message
    document.getElementById("products-grid").innerHTML = 
      `<p style="color: rgba(255,255,255,0.7); grid-column: 1/-1; text-align: center;">
        Unable to load products. Make sure your backend is running at ${API}<br>
        <small>Error: ${error.message}</small>
      </p>`;
  }
}

/* ================= PRODUCT IMAGE GALLERY ================= */
function nextImage() {
  if (productImages.length === 0) return;
  currentImageIndex = (currentImageIndex + 1) % productImages.length;
  updateProductImage();
}

function previousImage() {
  if (productImages.length === 0) return;
  currentImageIndex = (currentImageIndex - 1 + productImages.length) % productImages.length;
  updateProductImage();
}

function selectImage(index) {
  currentImageIndex = index;
  updateProductImage();
}

function updateProductImage() {
  if (productImages.length === 0) return;
  
  const track = document.getElementById("imageTrack");
  const trackImages = track ? track.querySelectorAll("img") : [];
  const activeImage = trackImages[currentImageIndex];
  
  if (activeImage) {
    activeImage.scrollIntoView({ behavior: "smooth", inline: "start", block: "nearest" });
  }
  
  // Apply color overlay if a color is selected
  trackImages.forEach((img, idx) => {
    if (selectedColor) {
      const colorHex = generateColorHex(selectedColor);
      if (colorHex && idx === currentImageIndex) {
        img.style.filter = "hue-rotate(0deg) saturate(1.2)";
        img.style.backgroundColor = colorHex;
      } else {
        img.style.filter = "none";
        img.style.backgroundColor = "transparent";
      }
    } else {
      img.style.filter = "none";
      img.style.backgroundColor = "transparent";
    }
  });
  
  // Update counter
  document.getElementById("imageCounter").innerText = currentImageIndex + 1;
  
  // Update thumbnails active state
  const thumbnails = document.querySelectorAll(".image-thumbnail");
  thumbnails.forEach((thumb, idx) => {
    if (idx === currentImageIndex) {
      thumb.classList.add("active");
    } else {
      thumb.classList.remove("active");
    }
  });
}

function renderProductImages(images) {
  productImages = images || [];
  
  // Initialize allProductImages with the first set of images (unfiltered)
  if (allProductImages.length === 0 && productImages.length > 0) {
    allProductImages = [...productImages];
  }
  
  currentImageIndex = 0;
  
  let track = document.getElementById("imageTrack");
  const gallery = document.getElementById("imageGallery");
  const thumbContainer = document.getElementById("imageThumbnails");

  if (!track && gallery) {
    track = document.createElement("div");
    track.id = "imageTrack";
    track.className = "image-track";
    gallery.insertBefore(track, gallery.firstChild);
  }
  
  if (productImages.length === 0) {
    if (track) {
      track.innerHTML = "";
    }
    thumbContainer.innerHTML = "";
    document.getElementById("imageTotalCount").innerText = "0";
    return;
  }

  // Render main gallery track
  if (track) {
    track.innerHTML = productImages.map((img, idx) => `
      <img src="${img}" alt="Product image ${idx + 1}">
    `).join("");
  }

  document.getElementById("imageTotalCount").innerText = productImages.length;
  
  // Render thumbnails
  thumbContainer.innerHTML = productImages.map((img, idx) => `
    <div class="image-thumbnail ${idx === 0 ? 'active' : ''}" onclick="selectImage(${idx})">
      <img src="${img}" alt="Product image ${idx + 1}">
    </div>
  `).join('');

  updateProductImage();
}

/* ================= FILTER PRODUCTS ================= */
function filterProducts(category) {
  filteredCategory = category;
  const buttons = document.querySelectorAll(".filter-btn");
  buttons.forEach(btn => btn.classList.remove("active"));
  event.target.classList.add("active");
  renderProducts();
}

/* ================= TOGGLE CART SIDEBAR ================= */
function toggleCart() {
  const modal = document.getElementById("cart-modal");
  modal.classList.toggle("active");
}

/* ================= RENDER PRODUCTS ================= */
function renderProducts() {
  const grid = document.getElementById("products-grid");
  grid.innerHTML = "";

  let filtered = products;
  if (filteredCategory !== "all") {
    filtered = products.filter(p => p.category === filteredCategory);
  }

  if (filtered.length === 0) {
    grid.innerHTML = `<p style="color: rgba(255,255,255,0.7); grid-column: 1/-1; text-align: center;">
      NO PRODUCTS IN THIS CATEGORY
    </p>`;
    return;
  }

  filtered.forEach(p => {
    grid.innerHTML += `
      <div class="product-card" onclick="openProductModal('${p.id}')">
        <div class="product-image">
          ${p.image 
            ? `<img src="${p.image}" style="width:100%;height:100%;object-fit:cover;" alt="${p.name}">`
            : `<div style="display:flex;align-items:center;justify-content:center;width:100%;height:100%;color:rgba(255,255,255,0.5);">NO IMAGE</div>`
          }
        </div>
        <div class="product-info">
          <div class="product-category">${p.category.toUpperCase()}</div>
          <div class="product-name">${p.name}</div>
          ${p.description ? `<div class="product-description">${p.description.substring(0, 50)}...</div>` : ''}
          <div class="product-footer">
            <div class="product-price">$${p.price.toFixed(2)}</div>
          </div>
        </div>
      </div>
    `;
  });
}

/* ================= PRODUCT MODAL ================= */
async function openProductModal(id) {
  selectedProduct = products.find(p => p.id === id);
  if (!selectedProduct) return;

  document.getElementById("modal-product-name").innerText = selectedProduct.name;
  document.getElementById("modal-product-description").innerHTML = selectedProduct.description || "No description available";
  document.getElementById("modal-product-price").innerText = selectedProduct.price.toFixed(2);
  
  // Initialize with local image if available
  if (selectedProduct.image) {
    renderProductImages([selectedProduct.image]);
  }

  // Fetch full product data from Printify API
  try {
    console.log(`Fetching product from: ${API}/product/${SHOP_ID}/${id}`);
    const response = await fetch(`${API}/product/${SHOP_ID}/${id}`);
    
    if (!response.ok) {
      throw new Error(`API returned status ${response.status}: ${response.statusText}`);
    }
    
    const fullProduct = await response.json();
    console.log("Full product from API:", fullProduct);
    
    // Extract all images from the product
    if (fullProduct.images && Array.isArray(fullProduct.images)) {
      const imageUrls = fullProduct.images.map(img => img.src).filter(src => src);
      console.log("Images found:", imageUrls.length);
      renderProductImages(imageUrls);
    }
    
    // Verify the product has variants
    if (!fullProduct.variants || fullProduct.variants.length === 0) {
      console.warn("Product has no variants");
    }
    
    renderProductOptions(fullProduct);
  } catch (error) {
    console.error("Failed to fetch product variants:", error);
    console.log("Falling back to renderProductOptions with local product data");
    // Still try to render options with what we have
    renderProductOptions(selectedProduct);
  }

  // Reset selections
  selectedSize = null;
  selectedColor = null;

  document.getElementById("product-modal").classList.add("active");
  
  // Freeze background on mobile
  if (window.innerWidth <= 768) {
    document.body.style.overflow = "hidden";
  }
}

async function renderProductOptions(product) {
  // Clear existing options
  const sizeContainer = document.getElementById("sizeOptions");
  const colorContainer = document.getElementById("colorOptions");
  
  if (!sizeContainer || !colorContainer) {
    console.error("Size or color container not found");
    return;
  }
  
  sizeContainer.innerHTML = "";
  colorContainer.innerHTML = "";

  console.log("renderProductOptions called with:", product);

  // Extract unique sizes and colors from ONLY ENABLED variants
  const sizes = new Set();
  const colors = new Map();
  const availableCombinations = new Set(); // Track which size/color combos exist

  // First, try to fetch filtered options from backend
  let enabledVariants = [];
  try {
    console.log(`Fetching filtered options from: ${API}/product/${SHOP_ID}/${product.id}/options`);
    const optionsRes = await fetch(`${API}/product/${SHOP_ID}/${product.id}/options`);
    
    if (optionsRes.ok) {
      const optionsData = await optionsRes.json();
      console.log("Options data:", optionsData);
      
      if (optionsData.allVariants && Array.isArray(optionsData.allVariants)) {
        enabledVariants = optionsData.allVariants;
        console.log(`‚úì Loaded ${enabledVariants.length} enabled variants (out of ${optionsData.totalVariants} total)`);
      }
    }
  } catch (error) {
    console.error("Failed to fetch filtered options:", error);
  }

  // If no enabled variants from API, extract from local product data
  let variants = [];
  if (enabledVariants.length > 0) {
    variants = enabledVariants;
  } else {
    // Fallback: parse all variants from local product
    if (product.variants && Array.isArray(product.variants)) {
      variants = product.variants;
    } else if (product.data && product.data.variants && Array.isArray(product.data.variants)) {
      variants = product.data.variants;
    }
    console.log(`‚ö†Ô∏è Using fallback: ${variants.length} total variants`);
  }

  console.log("Processing variants:", variants);

  // Extract sizes and colors from available variants
  if (variants && variants.length > 0) {
    variants.forEach((variant) => {
      let title = variant.title;
      
      const titleParts = title.split(" / ");
      if (titleParts.length === 2) {
        const sizeStr = titleParts[0].trim();
        const colorStr = titleParts[1].trim();
        
        // Convert size to letter format
        const letterSize = getSizeLetters(sizeStr);
        sizes.add(letterSize);
        
        // Add color with hex generation
        if (!colors.has(colorStr)) {
          const hexColor = generateColorHex(colorStr);
          colors.set(colorStr, hexColor);
        }
        
        // Track available combinations
        availableCombinations.add(`${letterSize}|${colorStr}`);
      }
    });
  }

  console.log("‚úì Found sizes:", Array.from(sizes));
  console.log("‚úì Found colors:", Array.from(colors.keys()));
  console.log("‚úì Available combinations:", availableCombinations.size);

  // Store variants and available combinations for reference
  productVariants = variants || [];
  window.availableSizeColorCombinations = availableCombinations;

  // Fetch color-to-images mapping
  try {
    console.log(`Fetching color-images mapping from: ${API}/product/${SHOP_ID}/${product.id}/color-images`);
    const colorImagesRes = await fetch(`${API}/product/${SHOP_ID}/${product.id}/color-images`);
    
    if (colorImagesRes.ok) {
      const colorImagesData = await colorImagesRes.json();
      console.log("Color-images mapping:", colorImagesData);
      
      if (colorImagesData.images && Array.isArray(colorImagesData.images)) {
        allProductImages = colorImagesData.images;
        console.log(`‚úì Loaded ${allProductImages.length} product images`);
      }
      
      if (colorImagesData.colorImageMapping) {
        colorImageMapping = colorImagesData.colorImageMapping;
        console.log("‚úì Color-to-image mapping loaded");
      }
    }
  } catch (error) {
    console.error("Failed to fetch color-images mapping:", error);
  }

  // Render sizes
  if (sizes.size > 0) {
    Array.from(sizes).sort().forEach(size => {
      const btn = document.createElement("button");
      btn.className = "size-option";
      btn.textContent = size;
      btn.onclick = function() { selectSize(this); };
      sizeContainer.appendChild(btn);
    });
  } else {
    sizeContainer.innerHTML = "<span style='color: rgba(255,255,255,0.5);'>No sizes available</span>";
  }

  // Render colors in a specific order
  if (colors.size > 0) {
    // Define the desired color order
    const colorOrder = ["White", "Black", "Sport Grey", "Royal", "Purple", "Light Pink", "Red"];
    
    // Render colors in the specified order
    colorOrder.forEach(colorName => {
      if (colors.has(colorName)) {
        const hexColor = colors.get(colorName);
        const btn = document.createElement("div");
        btn.className = "color-option";
        btn.style.backgroundColor = hexColor;
        btn.title = colorName;
        btn.setAttribute("data-color", colorName);
        btn.onclick = function() { selectColor(this); };
        colorContainer.appendChild(btn);
      }
    });
    
    // Render any colors not in the specified order (fallback)
    colors.forEach((hexColor, colorName) => {
      if (!colorOrder.includes(colorName)) {
        const btn = document.createElement("div");
        btn.className = "color-option";
        btn.style.backgroundColor = hexColor;
        btn.title = colorName;
        btn.setAttribute("data-color", colorName);
        btn.onclick = function() { selectColor(this); };
        colorContainer.appendChild(btn);
      }
    });
    
    console.log(`‚úì Rendered ${colors.size} colors (ordered)`);
  } else {
    colorContainer.innerHTML = "<span style='color: rgba(255,255,255,0.5);'>No colors available</span>";
  }
}

function getSizeLetters(sizeValue) {
  // Convert numeric sizes to letter sizes
  const sizeStr = String(sizeValue).toLowerCase().trim();
  
  // Map for numeric sizes (waist sizes, etc.)
  const numberMap = {
    "24": "XS",
    "25": "XS",
    "26": "XS",
    "27": "S",
    "28": "S",
    "29": "S",
    "30": "M",
    "31": "M",
    "32": "M",
    "33": "L",
    "34": "L",
    "35": "L",
    "36": "XL",
    "37": "XL",
    "38": "XL",
    "39": "XXL",
    "40": "XXL",
    "42": "XXL",
    "44": "XXL"
  };
  
  // If it's a number, map it
  if (numberMap[sizeStr]) {
    return numberMap[sizeStr];
  }
  
  // If it already looks like a letter size, return it
  if (/^(XS|S|M|L|XL|XXL)$/i.test(sizeStr)) {
    return sizeStr.toUpperCase();
  }
  
  // Otherwise return the original value
  return sizeValue;
}

function generateColorHex(colorName) {
  // Handle cases where colorName might be an object or not a string
  if (!colorName) return "#808080";
  
  let colorStr = colorName;
  if (typeof colorName === 'object') {
    colorStr = colorName.name || colorName.value || String(colorName);
  }
  
  if (typeof colorStr !== 'string') {
    colorStr = String(colorStr);
  }
  
  // Comprehensive color mapping for accurate color swatches
  const commonColorMap = {
    // Basics
    "black": "#1a1a1a",
    "white": "#ffffff",
    "gray": "#808080",
    "grey": "#808080",
    
    // Reds
    "red": "#dc143c",
    "crimson": "#dc143c",
    "dark red": "#8b0000",
    "darkred": "#8b0000",
    "firebrick": "#b22222",
    "indian red": "#cd5c5c",
    "light coral": "#f08080",
    "salmon": "#fa8072",
    "tomato": "#ff6347",
    "rose": "#ff007f",
    "pink": "#ffc0cb",
    "light pink": "#ffb6c1",
    "hot pink": "#ff69b4",
    "deep pink": "#ff1493",
    "pale violet red": "#db7093",
    
    // Oranges & Browns
    "orange": "#ff8c00",
    "dark orange": "#ff8c00",
    "orange red": "#ff4500",
    "orangered": "#ff4500",
    "coral": "#ff7f50",
    "brown": "#8b4513",
    "saddle brown": "#8b4513",
    "chocolate": "#d2691e",
    "peru": "#cd853f",
    "tan": "#d2b48c",
    "gold": "#ffd700",
    "goldenrod": "#daa520",
    "dark goldenrod": "#b8860b",
    
    // Yellows
    "yellow": "#ffff00",
    "khaki": "#f0e68c",
    "light goldenrod yellow": "#fafad2",
    "light yellow": "#ffffe0",
    "pale goldenrod": "#eee8aa",
    
    // Greens
    "green": "#008000",
    "dark green": "#006400",
    "darkgreen": "#006400",
    "forest green": "#228b22",
    "forestgreen": "#228b22",
    "lime": "#00ff00",
    "lime green": "#32cd32",
    "limegreen": "#32cd32",
    "light green": "#90ee90",
    "lightgreen": "#90ee90",
    "pale green": "#98fb98",
    "palegreen": "#98fb98",
    "sea green": "#2e8b57",
    "seagreen": "#2e8b57",
    "medium sea green": "#3cb371",
    "mediumseagreen": "#3cb371",
    "spring green": "#00ff7f",
    "springgreen": "#00ff7f",
    "green yellow": "#adff2f",
    "greenyellow": "#adff2f",
    "chartreuse": "#7fff00",
    "olive": "#808000",
    "dark olive green": "#556b2f",
    "darkolivegreen": "#556b2f",
    "yellow green": "#9acd32",
    "yellowgreen": "#9acd32",
    
    // Cyans & Teals
    "cyan": "#00ffff",
    "aqua": "#00ffff",
    "light cyan": "#e0ffff",
    "lightcyan": "#e0ffff",
    "dark cyan": "#008b8b",
    "darkcyan": "#008b8b",
    "teal": "#008080",
    "dark turquoise": "#00ced1",
    "darkturquoise": "#00ced1",
    "turquoise": "#40e0d0",
    "medium turquoise": "#48d1cc",
    "mediumturquoise": "#48d1cc",
    "cadet blue": "#5f9ea0",
    "cadetblue": "#5f9ea0",
    "light sea green": "#20b2aa",
    "lightseagreen": "#20b2aa",
    
    // Blues
    "blue": "#0000ff",
    "navy": "#000080",
    "dark blue": "#00008b",
    "darkblue": "#00008b",
    "medium blue": "#0000cd",
    "mediumblue": "#0000cd",
    "royal blue": "#4169e1",
    "royalblue": "#4169e1",
    "royal": "#4169e1",
    "cornflower blue": "#6495ed",
    "cornflowerblue": "#6495ed",
    "steel blue": "#4682b4",
    "steelblue": "#4682b4",
    "light steel blue": "#b0c4de",
    "lightsteelblue": "#b0c4de",
    "slate blue": "#6a5acd",
    "slateblue": "#6a5acd",
    "medium slate blue": "#7b68ee",
    "mediumslateblue": "#7b68ee",
    "light sky blue": "#87cefa",
    "lightskyblue": "#87cefa",
    "sky blue": "#87ceeb",
    "skyblue": "#87ceeb",
    "deep sky blue": "#00bfff",
    "deepskyblue": "#00bfff",
    "light blue": "#add8e6",
    "lightblue": "#add8e6",
    "powder blue": "#b0e0e6",
    "powderblue": "#b0e0e6",
    
    // Purples & Violets
    "purple": "#800080",
    "dark purple": "#301934",
    "darkpurple": "#301934",
    "medium purple": "#9370db",
    "mediumpurple": "#9370db",
    "blue violet": "#8a2be2",
    "blueviolet": "#8a2be2",
    "indigo": "#4b0082",
    "dark magenta": "#8b008b",
    "darkmagenta": "#8b008b",
    "dark violet": "#9400d3",
    "darkviolet": "#9400d3",
    "magenta": "#ff00ff",
    "fuchsia": "#ff00ff",
    "violet": "#ee82ee",
    "orchid": "#da70d6",
    "medium orchid": "#ba55d3",
    "mediumorchid": "#ba55d3",
    "plum": "#dda0dd",
    "thistle": "#d8bfd8",
    
    // Magentas & Reds
    "maroon": "#800000",
    "dark red": "#8b0000",
    "darkred": "#8b0000",
    
    // Neutrals & Whites
    "white": "#ffffff",
    "snow": "#fffafa",
    "honeydew": "#f0fff0",
    "mint cream": "#f5fffa",
    "mintcream": "#f5fffa",
    "alice blue": "#f0f8ff",
    "aliceblue": "#f0f8ff",
    "ghost white": "#f8f8ff",
    "ghostwhite": "#f8f8ff",
    "lavender": "#e6e6fa",
    "floral white": "#fffaf0",
    "floralwhite": "#fffaf0",
    "linen": "#faf0e6",
    "old lace": "#fdf5e6",
    "oldlace": "#fdf5e6",
    "seashell": "#fff5ee",
    "ivory": "#fffff0",
    "papaya whip": "#ffefd5",
    "papayawhip": "#ffefd5",
    "blanched almond": "#ffebcd",
    "blanchedalmond": "#ffebcd",
    "bisque": "#ffe4c4",
    "peach puff": "#ffdab9",
    "peachpuff": "#ffdab9",
    "antiquewhite": "#faebd7",
    "antique white": "#faebd7",
    
    // Grays & Greys (light to dark)
    "white": "#ffffff",
    "sport grey": "#adadad",
    "sportgrey": "#adadad",
    "gainsboro": "#dcdcdc",
    "light grey": "#d3d3d3",
    "lightgrey": "#d3d3d3",
    "light gray": "#d3d3d3",
    "lightgray": "#d3d3d3",
    "silver": "#c0c0c0",
    "dark gray": "#a9a9a9",
    "darkgray": "#a9a9a9",
    "dark grey": "#a9a9a9",
    "darkgrey": "#a9a9a9",
    "gray": "#808080",
    "grey": "#808080",
    "dim gray": "#696969",
    "dimgray": "#696969",
    "dim grey": "#696969",
    "dimgrey": "#696969",
    "light slate gray": "#778899",
    "lightslategray": "#778899",
    "light slate grey": "#778899",
    "lightslategrey": "#778899",
    "slate gray": "#708090",
    "slategray": "#708090",
    "slate grey": "#708090",
    "slategrey": "#708090",
    "dark slate gray": "#2f4f4f",
    "darkslategray": "#2f4f4f",
    "dark slate grey": "#2f4f4f",
    "darkslategrey": "#2f4f4f",
    "black": "#000000",
    
    // Creams & Beiges
    "cream": "#fffdd0",
    "beige": "#f5f5dc",
    "moccasin": "#ffe4b5",
    "navajo white": "#ffdead",
    "navajowhite": "#ffdead",
    "burlywood": "#deb887",
    "wheat": "#f5deb3",
    "light goldenrod": "#fafad2"
  };
  
  const normalizedColor = colorStr.toLowerCase().trim();
  if (commonColorMap[normalizedColor]) {
    return commonColorMap[normalizedColor];
  }
  
  // Generate a consistent color based on string hash for unknown colors
  let hash = 0;
  for (let i = 0; i < colorStr.length; i++) {
    hash = ((hash << 5) - hash) + colorStr.charCodeAt(i);
    hash = hash & hash; // Convert to 32bit integer
  }
  
  // Generate HSL color for better color distribution
  const hue = Math.abs(hash) % 360;
  const saturation = 60 + (Math.abs(hash) % 30);
  const lightness = 40 + (Math.abs(hash) % 30);
  
  // Convert HSL to RGB hex
  const c = (1 - Math.abs(2 * lightness / 100 - 1)) * saturation / 100;
  const x = c * (1 - Math.abs((hue / 60) % 2 - 1));
  const m = lightness / 100 - c / 2;
  let r = 0, g = 0, b = 0;
  
  if (hue < 60) {
    r = c; g = x; b = 0;
  } else if (hue < 120) {
    r = x; g = c; b = 0;
  } else if (hue < 180) {
    r = 0; g = c; b = x;
  } else if (hue < 240) {
    r = 0; g = x; b = c;
  } else if (hue < 300) {
    r = x; g = 0; b = c;
  } else {
    r = c; g = 0; b = x;
  }
  
  const toHex = (val) => Math.round((val + m) * 255).toString(16).padStart(2, '0');
  return `#${toHex(r)}${toHex(g)}${toHex(b)}`;
}

function findVariantId(size, color) {
  // Find variant ID matching the selected size and color
  if (!productVariants || productVariants.length === 0) return null;
  
  for (let variant of productVariants) {
    if (variant.title) {
      const parts = variant.title.split(" / ");
      if (parts.length === 2) {
        const variantSize = getSizeLetters(parts[0].trim());
        const variantColor = parts[1].trim();
        
        if (variantSize === size && variantColor === color) {
          return variant.id;
        }
      }
    }
  }
  
  return productVariants[0]?.id || null;
}

function closeProductModal() {
  document.getElementById("product-modal").classList.remove("active");
  selectedProduct = null;
  selectedSize = null;
  selectedColor = null;
  
  // Reset images to all images (unfiltered)
  productImages = allProductImages;
  currentImageIndex = 0;
  
  // Unfreeze background on mobile
  if (window.innerWidth <= 768) {
    document.body.style.overflow = "";
  }
}

function toggleDescription() {
  const desc = document.getElementById("modal-product-description");
  const toggle = document.getElementById("desc-toggle");
  desc.classList.toggle("collapsed");
  toggle.classList.toggle("collapsed");
  toggle.classList.toggle("expanded");
}

function toggleSection(element) {
  const h3 = element;
  const p = h3.nextElementSibling;
  const span = h3.querySelector('span');
  p.style.display = p.style.display === 'none' ? 'block' : 'none';
  span.textContent = p.style.display === 'none' ? '‚ñ∂' : '‚ñº';
}

function setActiveTab(element) {
  const tabs = element.parentElement.querySelectorAll('.modal-footer-tab');
  tabs.forEach(tab => tab.classList.remove('active'));
  element.classList.add('active');
}

function selectSize(element) {
  const sizeOptions = document.querySelectorAll(".size-option");
  sizeOptions.forEach(option => option.classList.remove("selected"));
  element.classList.add("selected");
  selectedSize = element.textContent;
  console.log("Selected size:", selectedSize);
}

function selectColor(element) {
  const colorOptions = document.querySelectorAll(".color-option");
  colorOptions.forEach(option => option.classList.remove("selected"));
  element.classList.add("selected");
  selectedColor = element.getAttribute("data-color");
  console.log("Selected color:", selectedColor);
  
  // Filter images based on selected color
  filterImagesByColor(selectedColor);
  
  // Update image with color effect
  updateProductImage();
}

function filterImagesByColor(colorName) {
  // Get image indices for the selected color
  const imageIndices = colorImageMapping[colorName];
  
  if (imageIndices && imageIndices.length > 0) {
    // Filter productImages to show only images for this color
    productImages = imageIndices.map(idx => allProductImages[idx]).filter(img => img);
    console.log(`‚úì Showing ${productImages.length} images for color: ${colorName}`);
  } else {
    // If no mapping found, show all images
    productImages = allProductImages;
    console.log(`‚ö†Ô∏è No images mapped for ${colorName}, showing all images`);
  }
  
  // Reset image index to start from first image of this color
  currentImageIndex = 0;
  
  // Re-render the gallery with filtered images
  renderProductImages(productImages);
}

function addToCartFromModal() {
  if (!selectedProduct) return;
  
  // Validate that both size and color are selected
  if (!selectedSize || !selectedColor) {
    alert("‚ùå Please select both a size and color");
    return;
  }
  
  // Check if the combination is available
  const combination = `${selectedSize}|${selectedColor}`;
  if (window.availableSizeColorCombinations && !window.availableSizeColorCombinations.has(combination)) {
    alert(`‚ùå Sorry, size ${selectedSize} is not available in ${selectedColor}`);
    return;
  }
  
  const variantId = findVariantId(selectedSize, selectedColor);
  
  console.log("Adding to cart - Size:", selectedSize, "Color:", selectedColor, "Variant ID:", variantId);
  if (variantId) {
    addToCart(selectedProduct.id, variantId);
    alert("‚úì Added to cart!");
    closeProductModal();
  } else {
    alert("‚ùå This combination is not available. Please select a different size or color.");
  }
}

/* ================= CART MANAGEMENT ================= */
function addToCart(productId, variantId) {
  const product = products.find(p => p.id === productId);
  if (!product) return;
  
  const variant = product.variants.find(v => v.id === variantId);
  if (!variant) return;
  
  const item = cart.find(i => i.variant_id === variantId);
  const itemPrice = variant.price / 100;
  const itemName = `${product.name} (${variant.title})`;
  
  if (item) {
    item.qty++;
  } else {
    cart.push({
      product_id: productId,
      variant_id: variantId,
      name: itemName,
      price: itemPrice,
      qty: 1
    });
  }
  
  updateCart();
  renderCartModal();
}

function removeFromCart(variantId) {
  cart = cart.filter(i => i.variant_id !== variantId);
  updateCart();
  renderCartModal();
}

function updateQuantity(variantId, delta) {
  const item = cart.find(i => i.variant_id === variantId);
  if (item) {
    item.qty += delta;
    if (item.qty <= 0) removeFromCart(variantId);
    else {
      updateCart();
      renderCartModal();
    }
  }
}

function updateCart() {
  document.getElementById("cart-count").innerText =
    cart.reduce((s, i) => s + i.qty, 0);
  document.getElementById("cart-count-mobile").innerText =
    cart.reduce((s, i) => s + i.qty, 0);
  
  const total = cart.reduce((s, i) => s + (i.price * i.qty), 0);
  const totalEl = document.getElementById("cart-total");
  const checkoutBtn = document.getElementById("checkout-btn");
  
  if (cart.length > 0) {
    document.getElementById("total-price").innerText = total.toFixed(2);
    totalEl.style.display = "block";
    checkoutBtn.disabled = false;
  } else {
    totalEl.style.display = "none";
    checkoutBtn.disabled = true;
  }
}

function renderCartModal() {
  const cartItemsEl = document.getElementById("cart-items");
  
  if (cart.length === 0) {
    cartItemsEl.innerHTML = '<div class="cart-empty">YOUR CART IS EMPTY</div>';
    return;
  }

  cartItemsEl.innerHTML = cart.map(item => `
    <div class="cart-item">
      <div class="cart-item-info">
        <div class="cart-item-name">${item.name}</div>
        <div class="cart-item-price">$${item.price.toFixed(2)} each</div>
      </div>
      <div class="cart-item-quantity">
        <button class="qty-btn" onclick="updateQuantity('${item.variant_id}', -1)">‚àí</button>
        <span style="min-width: 20px; text-align: center;">${item.qty}</span>
        <button class="qty-btn" onclick="updateQuantity('${item.variant_id}', 1)">+</button>
      </div>
      <button class="remove-item" onclick="removeFromCart('${item.variant_id}')">REMOVE</button>
    </div>
  `).join('');
}

/* ================= CHECKOUT ================= */
async function checkout() {
  if (cart.length === 0) {
    alert("Your cart is empty!");
    return;
  }

  // For now, show order summary. In production, integrate payment processing
  const total = cart.reduce((s, i) => s + (i.price * i.qty), 0);
  
  const orderSummary = cart.map(i => `${i.name} x${i.qty}`).join('\n');
  
  const response = confirm(
    `ORDER SUMMARY:\n\n${orderSummary}\n\nTOTAL: $${total.toFixed(2)}\n\nProceed to payment?`
  );

  if (!response) return;

  // Create the order with Printify
  try {
    const order = {
      line_items: cart.map(i => ({
        product_id: i.product_id,
        variant_id: i.variant_id,
        quantity: i.qty
      })),
      shipping_method: 1, // Standard shipping (required)
      send_shipping_notification: false, // Required, set to false for demo
      address_to: {
        first_name: "Customer",
        last_name: "Name",
        email: "customer@example.com",
        country: "US",
        region: "State",
        address1: "123 Main St",
        city: "City",
        zip: "12345"
      }
    };

    console.log("Sending order:", order);
    
    const result = await fetch(`${API}/order/${SHOP_ID}`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(order)
    }).then(r => r.json());

    console.log("Order result:", result);
    
    alert(`‚úì ORDER PLACED!\nOrder ID: ${result.id}\n\nThank you for your purchase!`);
    cart = [];
    updateCart();
    renderCartModal();
    toggleCart();
  } catch (error) {
    console.error("Checkout error:", error);
    alert("‚ùå Order failed. Please try again.");
  }
}

initStore();
</script>



</body></html>